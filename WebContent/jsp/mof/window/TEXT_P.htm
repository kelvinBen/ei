<HTML>
<HEAD>
<TITLE>Tab域属性</TITLE>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
 

<style>
td,body,select,div,span,button { font-size: 9pt; font-family:Arial; }
BUTTON {width:5em; border-width: 1pt; }
input { font-size: 9pt; padding:1pt 3pt;}
.title {}
a:link { color: #0000BB }
a:visited { color: #0000BB }
</style>
<script>
var win=window.dialogArguments;
var modalObj=win.JsObj.CurControl;
var tabName = modalObj.parentElement.parentElement.parentElement.parentElement.tabname;
function init()
{
var intxt=modalObj.value;
var checkreg=modalObj.checkreg;
if(checkreg!=null)
document.all("checkreg").value=checkreg;
var fieldname=modalObj.fieldname;
if(fieldname!=null)
document.all("fieldname").value=fieldname;
var chaname=modalObj.chaname;
if(chaname!=null)
document.all("chaname").value=chaname;
var pageevent=modalObj.pageevent;
if(pageevent!=null)
document.all("pageevent").value=pageevent;

var size=modalObj.size;
if(size!=null)
document.all("size").value=size;

var isreadonly=modalObj.isreadonly;
if(isreadonly!=null)
selected("isreadonly",isreadonly);


var insearchpage=modalObj.insearchpage;
if(insearchpage!=null)
selected("insearchpage",insearchpage);

var inupdatepage=modalObj.inupdatepage;
if(inupdatepage!=null)
selected("inupdatepage",inupdatepage);



var iscansearch=modalObj.iscansearch;
if(iscansearch!=null)
selected("iscansearch",iscansearch);
var showtitle=modalObj.showtitle;
if(showtitle!=null)
selected("showtitle",showtitle);
var ISMANDATORY=modalObj.ISMANDATORY;
if(ISMANDATORY!=null)
selected("ISMANDATORY",ISMANDATORY);

var DEFAULTVALUE=modalObj.DEFAULTVALUE;
if(DEFAULTVALUE!=null)
document.all("DEFAULTVALUE").value=DEFAULTVALUE;
var ISMANDATORY=modalObj.ISMANDATORY;
if(ISMANDATORY!=null)
selected("ISMANDATORY",ISMANDATORY);


var VALIDATIONMSG=modalObj.VALIDATIONMSG;
if(VALIDATIONMSG!=null)
document.all("VALIDATIONMSG").value=VALIDATIONMSG;

var DISPLAYLOGIC=modalObj.DISPLAYLOGIC;
if(DISPLAYLOGIC!=null)
document.all("DISPLAYLOGIC").value=DISPLAYLOGIC;

var field_TIP=modalObj.field_TIP;
if(field_TIP!=null)
document.all("field_TIP").value=field_TIP;
var field_VALIDATIONCODE=modalObj.field_VALIDATIONCODE;
if(field_VALIDATIONCODE!=null)
document.all("field_VALIDATIONCODE").value=field_VALIDATIONCODE;

}
//保存
function dosave()
{
	var checkreg=document.all("checkreg").value;
	if(checkreg!=null)
		modalObj.checkreg=checkreg;
	var fieldname=document.all("fieldname").value;
	if(fieldname==null || fieldname=="" || fieldname=="null")
	{
		alert("域名称不能为空！");
		return false;
	}
	modalObj.fieldname=fieldname;
	modalObj.value=fieldname;
	if(modalObj.MOF_FIELD_ID.indexOf("@")!=-1)
		modalObj.MOF_FIELD_ID = "@"+tabName+"."+fieldname+"@";


	var pageevent=document.all("pageevent").value;
	if(pageevent!=null)
		modalObj.pageevent=pageevent;
	var size=document.all("size").value;
	if(size==null || size=="" )
	{
		alert("域宽度不能为空！");
		return false;
	}
	if(isNaN(size))
	{
		alert("域宽度必须为整数！");
		return false;
	}
	modalObj.size=size;
	var isreadonly=document.all("isreadonly").value;
	if(isreadonly!=null)
		modalObj.isreadonly=isreadonly;



	var insearchpage=document.all("insearchpage").value;
	if(insearchpage!=null)
		modalObj.insearchpage=insearchpage;

	var inupdatepage=document.all("inupdatepage").value; 
	if(inupdatepage!=null)
		modalObj.inupdatepage=inupdatepage;
	if(inupdatepage == 0)
	{  
		modalObj.style.background  = "#C0C0C0"; 
	}
	else
	{
		modalObj.style.background  = "#F4F5F7";
	}

	var iscansearch=document.all("iscansearch").value;
	if(iscansearch!=null)
		modalObj.iscansearch=iscansearch;
	var showtitle=document.all("showtitle").value;
	if(showtitle!=null)
		modalObj.showtitle=showtitle;
	var chaname=document.all("chaname").value;
	if(showtitle &&(chaname==null || chaname==""))
	{
		alert("中文名称不能为空！");
		return false;
	}
	modalObj.chaname=chaname;

	var ISMANDATORY=document.all("ISMANDATORY").value;
	if(ISMANDATORY!=null)
		modalObj.ISMANDATORY=ISMANDATORY;

	var DEFAULTVALUE=document.all("DEFAULTVALUE").value;
	if(DEFAULTVALUE!=null)
		modalObj.DEFAULTVALUE=DEFAULTVALUE;
	var ISMANDATORY=document.all("ISMANDATORY").value;
	if(ISMANDATORY!=null)
		modalObj.ISMANDATORY=ISMANDATORY;
	
	
	var VALIDATIONMSG=document.all("VALIDATIONMSG").value;
	if(VALIDATIONMSG!=null)
		modalObj.VALIDATIONMSG=VALIDATIONMSG;

	var DISPLAYLOGIC=document.all("DISPLAYLOGIC").value;
	if(DISPLAYLOGIC!=null)
		modalObj.DISPLAYLOGIC=DISPLAYLOGIC;

	var field_TIP=document.all("field_TIP").value;
	if(field_TIP!=null)
		modalObj.field_TIP=field_TIP;
	var field_VALIDATIONCODE=document.all("field_VALIDATIONCODE").value;
	if(field_VALIDATIONCODE!=null)
		modalObj.field_VALIDATIONCODE=field_VALIDATIONCODE;
	 modalObj.className="";
	modalObj.parentElement.innerHTML = '<label style="width:50%;height:100%;background-color:#E1E8EF;padding-top:5;valign:bottom">'+chaname+'：</label>' + modalObj.outerHTML;
	
 
	window.returnValue="true";
	window.close();
}
//根据下拉域的ＮＡＭＥ，选项使该项selected
function selected(sel,opi)
{
var select=document.all(sel);
if(select==null || select.tagName!="SELECT")
	return;
	for(var i=0;i<select.options.length;i++)
	{
	if(select.options[i].value==opi)
		select.options[i].selected=true;
	}
	if(select.onchange!=null)
	select.onchange();
}

</script>
</HEAD>

<BODY bgcolor=buttonface onload="init();">
<fieldset  class="radiogroup" style="padding:10px;"><legend class=title>域定义</legend>
<table border="0" height="100%" width="90%" cellspacing="0" cellpadding="0" style="padding-left:10px">
<tr>
	<td >
	域名称：
	</td>
	<td >
	<input size=20 name="fieldname"  maxlength="60" ><font color="#FF0000"> *</font>
	</td>
	</tr>
	<tr>
	<td >
	中文名称：
	</td>
	<td >
	<input size=20 name="chaname"  maxlength="255" ><font color="#FF0000"> *</font>
	</td>
	</tr>

	<tr>
	<td nowrap>
	长度：
	</td>
	<td >
	<input name="size" size=5  maxlength="11"  ><font color="#FF0000"> *</font>
	</td>
</tr>
<tr>
	<td nowrap>
	是否只读：
	</td>
	<td >
	<select name="isreadonly"><option value=1>是</option><option value=0 selected>否</option></select>
	</td>
</tr>
<tr>
	<td nowrap>
	在维护页面显示：
	</td>
	<td >
	<select name="inupdatepage"><option value=1 selected>是</option><option value=0 >否</option></select>
	</td>
</tr>	

<tr>
	<td nowrap>
		在查询页面显示：
	</td>
	<td >
	<select name="insearchpage"><option value=1 selected>是</option><option value=0 >否</option></select>
	</td>
</tr>	
<tr>
	<td nowrap>
	作为简单查询条件：
	</td>
	<td >
	<select name="iscansearch"><option value=1>是</option><option value=0 selected>否</option></select>
	</td>
</tr>	
<tr>
	<td nowrap>
	是否显示标题：
	</td>
	<td >
	<select name="showtitle"><option value=1 selected>是</option><option value=0 >否</option></select>
	</td>
</tr>	
<tr>
	<td nowrap>
	是否必须项：
	</td>
	<td >
	<select name="ISMANDATORY"><option value=1>是</option><option value=0 selected>否</option></select>
	</td>
</tr>

<tr>
	<td nowrap>
	校验格式：
	</td>
	<td >
	<input size=20 name="checkreg">
	</td>
</tr>
<tr>
	<td nowrap>
	默认值：
	</td>
	<td >
	<textarea size=20 name="DEFAULTVALUE" cols=35 ></textarea>
	</td>
</tr>

	<tr>
	<td nowrap>
	页面事件：
	</td>
	<td >
	<textarea  name="pageevent" cols=35  title="格式：[（事件：事件体@）事件：事件体]，例如：onchange:doChange()@onclick:doClick()@onblur:doBlur()"></textarea>
	</td>
</tr>	

<tr>
	<td nowrap>
显示逻辑：
	</td>
	<td >
	<textarea name="DISPLAYLOGIC" cols=35></textarea>
	</td>
</tr>
<tr>

<tr>
	<td nowrap>
自定义提示信息：
	</td>
	<td >
	<textarea name="VALIDATIONMSG" cols=35></textarea>
	</td>
</tr>
<tr>
	<td nowrap>
页面帮助信息：
	</td>
	<td >
	<textarea name="field_TIP" cols=35></textarea>
	</td>
</tr>
<tr>
	<td nowrap>
参考值有效逻辑：
	</td>
	<td >
	<textarea name="field_VALIDATIONCODE" cols=35></textarea>
	</td>
</tr>


<tr>
	<td colspan=2 align=center>
	<br>
	<BUTTON ID=Ok TYPE=SUBMIT onclick="dosave();">确定</BUTTON>&nbsp; &nbsp; <BUTTON ONCLICK="window.close();">取消</BUTTON>
	</td>
</tr>
</table>
</fieldset>
</BODY>   
</HTML>